
###################################################################################
###									PROGRAM										###
###################################################################################

NAME					=		philo

###################################################################################
###									COMPILE										###
###################################################################################

CC						=		cc

###################################################################################
###									DIRECTORY									###
###################################################################################

OBJ_DIR					=		obj
SRC_DIR					=		src

###################################################################################
###									FLAGS										###
###################################################################################

CFLAGS					=		-Wall -Wextra -Werror

###################################################################################
###									FILES										###
###################################################################################

SRC						=		atoi_atot.c\
								init.c\
								lk_ls_fork.c\
								lk_ls_philo.c\
								utils.c

INCLUDES				=		-Iincludes
HEADER					=		includes/philo.h
OBJ						=		$(SRC:%.c=$(OBJ_DIR)/%.o)

###################################################################################
###									ARCHIVES									###
###################################################################################

all: $(NAME)

$(NAME): $(OBJ)
			$(CC) $(CFLAGS) $(OBJ) -o $(NAME)

$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c $(HEADER) | $(OBJ_DIR)
			$(CC) $(CFLAGS) $(INCLUDES) -o $@ -c $<

$(OBJ_DIR):
			mkdir -p $(OBJ_DIR)

re: fclean
			$(MAKE) all

fclean: clean
			rm -f $(NAME)

clean: 
			rm -rf $(OBJ_DIR)

.PHONY: all clean fclean re